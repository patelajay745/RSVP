org: ajaypatel
app: rsvp
service: rsvp
frameworkVersion: "3"

provider:
    name: aws
    runtime: nodejs18.x
    profile: ajay
    iamRoleStatements:
        - Effect: Allow
          Action:
              - s3:*
              - ses:*
          Resource: "*"

plugins:
    - serverless-offline
    - serverless-dotenv-plugin

functions:
    welcome:
        handler: index.handler
        events:
            - http:
                  path: /healthcheck
                  method: GET
                  cors: true
    UserCreate:
        handler: handlers/user/register.handler
        events:
            - http:
                  path: /user
                  method: POST
                  cors: true
    UserLogin:
        handler: handlers/user/login.handler
        events:
            - http:
                  path: /login
                  method: POST
                  cors: true
    UserLogout:
        handler: handlers/user/logout.handler
        events:
            - http:
                  path: /logout
                  method: POST
                  cors: true

resources:
    Resources:
        MyBucket:
            Type: AWS::S3::Bucket
            Properties:
                BucketName: myrsvp-bucket
